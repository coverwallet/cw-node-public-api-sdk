{
  "openapi": "3.0.2",
  "info": {
    "version": "1.0.0",
    "title": "Coverwallet OpenAPI",
    "x-logo": {
      "url": "https://www.coverwallet.com/assets/new-home/coverwallet_logo_negative-1ab94c362a7dcbf886eb51f48ff0d784cff7c5b45eeaa43a508bf359a02f2b29.svg",
      "backgroundColor": "#428ad8"
    },
    "description": "<strong>Disclaimer: </strong>\nThe API described in this page is not production-ready and is subject to change without previous notice.\n\n### Authentication\n\nAll endpoints - except the access token generation - require the\nAPI client to send a valid access token in the `Authorization` header.\nThis token is obtained using the [authentication endpoint](#/Authentication/get_access_token)\nand expires after 30 minutes. A new access token can be generated at any time,\nwhen the previous one has expired. Generating a new access token does not expire\nany existing token, so multiple valid access token can coexist.\n\n### Idempotency\n\nSome endpoints require the API client to send an idempotency key in the `X-IdempotencyKey`\nheader to uniquely identify a request.\n\n### Error handling\n\nAll errors returned by the API endpoints follow the same structure:\n* **source**: Indicates the field or operation where the error happened. Usually, it contains the name of a field where a validation error happened.\n* **type**: A string with capital letters that identifies the kind of error that happened. The description of every error type can be found in the table below.\n* **message**: A human-readable description of the error. This description may change over time to make it more comprehensible, so it should not be used by API clients to understand the error that happened.\n\n```\n  {\n    \"source\": \"industry\",\n    \"type\": \"VALIDATION\",\n    \"message\": \"Industry Subindustry is not a valid UUID\"\n  }\n```\n\n<details>\n| Error type        | Description                                                                                                                                                                       |\n|------------------ |---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------  |\n| VALIDATION        | The data provided in the request is not valid according to the documentation. The field where the violation happened should be described in the `source` property of the error.     |\n| MISSING_PARAMETER | A required parameter was not sent to the API.\n| DUPLICATED        | The data provided in the request is not valid according to the documentation. Some fields should be unique.  |\n| INTERNAL_SERVER_ERROR | An error happened in the API servers. The system administrator has been notified. |\n| RECORD_NOT_FOUND | The record cannot be found in our system. Please, make sure that the identifier of the record is correct. |\n| MISSING_SCOPE | The scope(s) needed to use a certain endpoint cannot be found in the access token. Please, make sure that your user has access to the scope needed in that endpoint, and it is requested during the API login process |\n| INVALID_SCOPE | At least one of the requested scopes is invalid, unknown, malformed, or not granted to the application |\n| INVALID_TOKEN | The access token is not correct, a new one needs to be requested. This error normally happens when the original access token expires after 30 minutes. |\n| MISSING_IDEMPOTENCY_KEY | The idempotency key is missing. Please, make sure to set X-IdempotencyKey header for this endpoint. |\n| REUSED_IDEMPOTENCY_KEY | The provided idempotency key has already been used in another request with a different body. |\n</details>\n"
  },
  "tags": [
    {
      "name": "Account",
      "description": "Operations about account"
    },
    {
      "name": "Policy",
      "description": "Operations about policy"
    },
    {
      "name": "Certificate",
      "description": "Operations about certificates"
    },
    {
      "name": "Quote",
      "description": "Operations about quote"
    },
    {
      "name": "Endorsements",
      "description": "Changes about policy"
    },
    {
      "name": "Catalog",
      "description": "Operations to request misc resources"
    },
    {
      "name": "Authentication",
      "description": "Operations to request access token"
    },
    {
      "name": "Subscriptions",
      "description": "Configuration of event subscriptions"
    },
    {
      "name": "Payment methods",
      "description": "Configuration of payment methods"
    }
  ],
  "servers": [
    {
      "url": "https://public-api.aoncover.biz/v1"
    },
    {
      "url": "https://public-api.coveriq.info/v1"
    }
  ],
  "paths": {
    "/oauth/token": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Get an access token",
        "description": "Exchange your email and password by an access token that can be used to authenticate subsequent requests.",
        "operationId": "get_access_token",
        "requestBody": {
          "description": "Get an access token",
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "type": "object",
                    "properties": {
                      "grant_type": {
                        "type": "string",
                        "example": "password",
                        "enum": ["password"]
                      },
                      "username": {
                        "type": "string",
                        "example": "foo@bar.com"
                      },
                      "password": {
                        "type": "string",
                        "format": "password",
                        "example": "my-secret-password"
                      },
                      "scope": {
                        "type": "string",
                        "example": "admin:account admin:policy",
                        "description": "A list of scopes required for this access token. If no scope is provided, all available scopes will be included."
                      }
                    },
                    "required": ["grant_type", "username", "password"]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "grant_type": {
                        "type": "string",
                        "example": "client_credentials",
                        "enum": ["client_credentials"]
                      },
                      "client_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "client_secret": {
                        "type": "string",
                        "format": "password"
                      },
                      "scope": {
                        "type": "string",
                        "example": "admin:account admin:policy",
                        "description": "A list of scopes required for this access token. If no scope is provided, all available scopes will be included."
                      }
                    },
                    "required": ["grant_type", "client_id", "client_secret"]
                  }
                ]
              },
              "examples": {
                "resource_owner_credentials": {
                  "summary": "Resource owner credentials",
                  "value": {
                    "grant_type": "password",
                    "username": "foo@bar.com",
                    "password": "p4ssw0rd",
                    "scope": "admin:account"
                  }
                },
                "client_credentials": {
                  "summary": "Client credentials",
                  "value": {
                    "grant_type": "client_credentials",
                    "client_id": "54f52c33-61ed-46d4-8796-eb8a30e90fe0",
                    "client_secret": "hNObhQFv5M82euBYzaxo0b9fyl8cs1CWBWHE4_sThXQ",
                    "scope": "admin:account"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Access token successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "A JWT access token that should be included as a Bearer token in the Authorization header of subsequent requests"
                    },
                    "token_type": {
                      "type": "string",
                      "example": "Bearer"
                    },
                    "expires_in": {
                      "type": "integer",
                      "example": 1800,
                      "description": "The expiration time since the access token was created, in seconds"
                    },
                    "scope": {
                      "type": "string",
                      "example": "admin:account admin:policy",
                      "description": "The list of scopes present in the access token"
                    },
                    "created_at": {
                      "type": "integer",
                      "example": 1613989930,
                      "description": "The UTC representation of the moment when the access token was created. It should be used together with the expires_in parameter to determine when an access token is going to expire"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "The authentication information sent is incorrect or missing",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "There was an error in our servers",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/accounts": {
      "post": {
        "tags": ["Account"],
        "summary": "Add a new account",
        "description": "Add a new account",
        "operationId": "add_account",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Create a new account",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "external_id": {
                    "type": "string",
                    "example": 6843656842020,
                    "description": "Account ID"
                  },
                  "business_information": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "example": "My Business Name"
                      },
                      "type": {
                        "type": "string",
                        "example": "Individual",
                        "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                      },
                      "website": {
                        "type": "string",
                        "example": "www.mybusiness.com"
                      },
                      "identification_number": {
                        "type": "string",
                        "example": "1213453-X"
                      },
                      "year_established": {
                        "type": "number",
                        "format": "int32",
                        "example": 2020
                      },
                      "annual_revenue": {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      "fulltime_employees": {
                        "type": "integer",
                        "format": "int32",
                        "example": 5
                      },
                      "parttime_employees": {
                        "type": "integer",
                        "format": "int32",
                        "example": 10
                      }
                    },
                    "required": ["name"]
                  },
                  "industry": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": ["sic", "naics", "naf", "anzsic"],
                        "description": "Industry classification system"
                      },
                      "class_code": {
                        "type": "string",
                        "example": "cc1",
                        "description": "Class Code of the industry"
                      },
                      "subclass_code": {
                        "type": "string",
                        "example": "scc1",
                        "description": "Subclass Code of the industry"
                      }
                    }
                  },
                  "addresses": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "default": "billing",
                          "enum": ["mailing", "billing"]
                        },
                        "address_line": {
                          "type": "string",
                          "description": "Street number and street name",
                          "example": "935 Madison Ave"
                        },
                        "city": {
                          "type": "string",
                          "example": "New York"
                        },
                        "state": {
                          "type": "string",
                          "example": "NY"
                        },
                        "country_code": {
                          "type": "string",
                          "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                          "example": "US"
                        },
                        "postal_code": {
                          "type": "string",
                          "description": "Postcode or ZIP code of an address",
                          "example": "10065"
                        }
                      },
                      "required": ["address_line"]
                    }
                  },
                  "email": {
                    "type": "string",
                    "example": "sample_mail@mail.com",
                    "format": "email"
                  },
                  "phone_number": {
                    "type": "string",
                    "example": "+61285993444",
                    "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Account successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "external_id": {
                              "type": "string",
                              "example": 6843656842020,
                              "description": "Account ID"
                            },
                            "business_information": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "example": "My Business Name"
                                },
                                "type": {
                                  "type": "string",
                                  "example": "Individual",
                                  "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                                },
                                "website": {
                                  "type": "string",
                                  "example": "www.mybusiness.com"
                                },
                                "identification_number": {
                                  "type": "string",
                                  "example": "1213453-X"
                                },
                                "year_established": {
                                  "type": "number",
                                  "format": "int32",
                                  "example": 2020
                                },
                                "annual_revenue": {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                "fulltime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 5
                                },
                                "parttime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 10
                                }
                              },
                              "required": ["name"]
                            },
                            "industry": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": ["sic", "naics", "naf", "anzsic"],
                                  "description": "Industry classification system"
                                },
                                "class_code": {
                                  "type": "string",
                                  "example": "cc1",
                                  "description": "Class Code of the industry"
                                },
                                "subclass_code": {
                                  "type": "string",
                                  "example": "scc1",
                                  "description": "Subclass Code of the industry"
                                }
                              }
                            },
                            "addresses": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "default": "billing",
                                    "enum": ["mailing", "billing"]
                                  },
                                  "address_line": {
                                    "type": "string",
                                    "description": "Street number and street name",
                                    "example": "935 Madison Ave"
                                  },
                                  "city": {
                                    "type": "string",
                                    "example": "New York"
                                  },
                                  "state": {
                                    "type": "string",
                                    "example": "NY"
                                  },
                                  "country_code": {
                                    "type": "string",
                                    "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                                    "example": "US"
                                  },
                                  "postal_code": {
                                    "type": "string",
                                    "description": "Postcode or ZIP code of an address",
                                    "example": "10065"
                                  }
                                },
                                "required": ["address_line"]
                              }
                            },
                            "email": {
                              "type": "string",
                              "example": "sample_mail@mail.com",
                              "format": "email"
                            },
                            "phone_number": {
                              "type": "string",
                              "example": "+61285993444",
                              "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/accounts/{id}": {
      "get": {
        "tags": ["Account"],
        "summary": "Fetch an account",
        "description": "Fetch an existing account by ID.",
        "operationId": "get_account",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "The ID of the account you are looking for"
          }
        ],
        "responses": {
          "200": {
            "description": "Account successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "external_id": {
                              "type": "string",
                              "example": 6843656842020,
                              "description": "Account ID"
                            },
                            "business_information": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "example": "My Business Name"
                                },
                                "type": {
                                  "type": "string",
                                  "example": "Individual",
                                  "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                                },
                                "website": {
                                  "type": "string",
                                  "example": "www.mybusiness.com"
                                },
                                "identification_number": {
                                  "type": "string",
                                  "example": "1213453-X"
                                },
                                "year_established": {
                                  "type": "number",
                                  "format": "int32",
                                  "example": 2020
                                },
                                "annual_revenue": {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                "fulltime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 5
                                },
                                "parttime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 10
                                }
                              },
                              "required": ["name"]
                            },
                            "industry": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": ["sic", "naics", "naf", "anzsic"],
                                  "description": "Industry classification system"
                                },
                                "class_code": {
                                  "type": "string",
                                  "example": "cc1",
                                  "description": "Class Code of the industry"
                                },
                                "subclass_code": {
                                  "type": "string",
                                  "example": "scc1",
                                  "description": "Subclass Code of the industry"
                                }
                              }
                            },
                            "addresses": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "default": "billing",
                                    "enum": ["mailing", "billing"]
                                  },
                                  "address_line": {
                                    "type": "string",
                                    "description": "Street number and street name",
                                    "example": "935 Madison Ave"
                                  },
                                  "city": {
                                    "type": "string",
                                    "example": "New York"
                                  },
                                  "state": {
                                    "type": "string",
                                    "example": "NY"
                                  },
                                  "country_code": {
                                    "type": "string",
                                    "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                                    "example": "US"
                                  },
                                  "postal_code": {
                                    "type": "string",
                                    "description": "Postcode or ZIP code of an address",
                                    "example": "10065"
                                  }
                                },
                                "required": ["address_line"]
                              }
                            },
                            "email": {
                              "type": "string",
                              "example": "sample_mail@mail.com",
                              "format": "email"
                            },
                            "phone_number": {
                              "type": "string",
                              "example": "+61285993444",
                              "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Account"],
        "summary": "Update an account",
        "description": "Update an existing account. All fields are optional.",
        "operationId": "update_account",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The account ID"
          }
        ],
        "requestBody": {
          "description": "Update an account",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "external_id": {
                    "type": "string",
                    "example": 6843656842020,
                    "description": "Account ID"
                  },
                  "business_information": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "example": "My Business Name"
                      },
                      "type": {
                        "type": "string",
                        "example": "Individual",
                        "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                      },
                      "website": {
                        "type": "string",
                        "example": "www.mybusiness.com"
                      },
                      "identification_number": {
                        "type": "string",
                        "example": "1213453-X"
                      },
                      "year_established": {
                        "type": "number",
                        "format": "int32",
                        "example": 2020
                      },
                      "annual_revenue": {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      "fulltime_employees": {
                        "type": "integer",
                        "format": "int32",
                        "example": 5
                      },
                      "parttime_employees": {
                        "type": "integer",
                        "format": "int32",
                        "example": 10
                      }
                    },
                    "required": ["name"]
                  },
                  "industry": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": ["sic", "naics", "naf", "anzsic"],
                        "description": "Industry classification system"
                      },
                      "class_code": {
                        "type": "string",
                        "example": "cc1",
                        "description": "Class Code of the industry"
                      },
                      "subclass_code": {
                        "type": "string",
                        "example": "scc1",
                        "description": "Subclass Code of the industry"
                      }
                    }
                  },
                  "addresses": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "default": "billing",
                          "enum": ["mailing", "billing"]
                        },
                        "address_line": {
                          "type": "string",
                          "description": "Street number and street name",
                          "example": "935 Madison Ave"
                        },
                        "city": {
                          "type": "string",
                          "example": "New York"
                        },
                        "state": {
                          "type": "string",
                          "example": "NY"
                        },
                        "country_code": {
                          "type": "string",
                          "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                          "example": "US"
                        },
                        "postal_code": {
                          "type": "string",
                          "description": "Postcode or ZIP code of an address",
                          "example": "10065"
                        }
                      },
                      "required": ["address_line"]
                    }
                  },
                  "email": {
                    "type": "string",
                    "example": "sample_mail@mail.com",
                    "format": "email"
                  },
                  "phone_number": {
                    "type": "string",
                    "example": "+61285993444",
                    "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Account successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "external_id": {
                              "type": "string",
                              "example": 6843656842020,
                              "description": "Account ID"
                            },
                            "business_information": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "example": "My Business Name"
                                },
                                "type": {
                                  "type": "string",
                                  "example": "Individual",
                                  "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                                },
                                "website": {
                                  "type": "string",
                                  "example": "www.mybusiness.com"
                                },
                                "identification_number": {
                                  "type": "string",
                                  "example": "1213453-X"
                                },
                                "year_established": {
                                  "type": "number",
                                  "format": "int32",
                                  "example": 2020
                                },
                                "annual_revenue": {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                "fulltime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 5
                                },
                                "parttime_employees": {
                                  "type": "integer",
                                  "format": "int32",
                                  "example": 10
                                }
                              },
                              "required": ["name"]
                            },
                            "industry": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": ["sic", "naics", "naf", "anzsic"],
                                  "description": "Industry classification system"
                                },
                                "class_code": {
                                  "type": "string",
                                  "example": "cc1",
                                  "description": "Class Code of the industry"
                                },
                                "subclass_code": {
                                  "type": "string",
                                  "example": "scc1",
                                  "description": "Subclass Code of the industry"
                                }
                              }
                            },
                            "addresses": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "default": "billing",
                                    "enum": ["mailing", "billing"]
                                  },
                                  "address_line": {
                                    "type": "string",
                                    "description": "Street number and street name",
                                    "example": "935 Madison Ave"
                                  },
                                  "city": {
                                    "type": "string",
                                    "example": "New York"
                                  },
                                  "state": {
                                    "type": "string",
                                    "example": "NY"
                                  },
                                  "country_code": {
                                    "type": "string",
                                    "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                                    "example": "US"
                                  },
                                  "postal_code": {
                                    "type": "string",
                                    "description": "Postcode or ZIP code of an address",
                                    "example": "10065"
                                  }
                                },
                                "required": ["address_line"]
                              }
                            },
                            "email": {
                              "type": "string",
                              "example": "sample_mail@mail.com",
                              "format": "email"
                            },
                            "phone_number": {
                              "type": "string",
                              "example": "+61285993444",
                              "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/accounts/{id}/contacts": {
      "post": {
        "deprecated": true,
        "tags": ["Account"],
        "summary": "Add a contact. Deprecated in favor of \"POST /contacts\"",
        "description": "Add a contact",
        "operationId": "deprecated_add_contact",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The account ID"
          }
        ],
        "requestBody": {
          "description": "Update a contact",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "account_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "relationship": {
                    "type": "string",
                    "enum": ["primary", "driver", "owner", "other"],
                    "default": "primary"
                  },
                  "first_name": {
                    "type": "string",
                    "example": "firstName"
                  },
                  "last_name": {
                    "type": "string",
                    "example": "lastName"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "sample_mail@mail.com"
                  },
                  "communications_opt_out": {
                    "type": "string",
                    "enum": ["email", "sms", "all", "none"],
                    "default": "none"
                  },
                  "contact_numbers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "phone",
                            "extension",
                            "mobile",
                            "fax",
                            "other"
                          ]
                        },
                        "number": {
                          "type": "string",
                          "description": "A phone number in E.164 format",
                          "example": "+61285993444"
                        }
                      },
                      "required": ["type", "number"]
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Contact successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "account_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "relationship": {
                              "type": "string",
                              "enum": ["primary", "driver", "owner", "other"],
                              "default": "primary"
                            },
                            "first_name": {
                              "type": "string",
                              "example": "firstName"
                            },
                            "last_name": {
                              "type": "string",
                              "example": "lastName"
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "example": "sample_mail@mail.com"
                            },
                            "communications_opt_out": {
                              "type": "string",
                              "enum": ["email", "sms", "all", "none"],
                              "default": "none"
                            },
                            "contact_numbers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "phone",
                                      "extension",
                                      "mobile",
                                      "fax",
                                      "other"
                                    ]
                                  },
                                  "number": {
                                    "type": "string",
                                    "description": "A phone number in E.164 format",
                                    "example": "+61285993444"
                                  }
                                },
                                "required": ["type", "number"]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/accounts/{account_id}/contacts/{contact_id}": {
      "patch": {
        "deprecated": true,
        "tags": ["Account"],
        "summary": "Update a contact. Deprecated in favor of \"PATCH /contacts/{id}\"",
        "description": "Update a contact of an account. All fields are optional.",
        "operationId": "deprecated_update_contact",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "account_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The account ID"
          },
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The contact ID"
          }
        ],
        "requestBody": {
          "description": "Update a contact",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "account_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "relationship": {
                    "type": "string",
                    "enum": ["primary", "driver", "owner", "other"],
                    "default": "primary"
                  },
                  "first_name": {
                    "type": "string",
                    "example": "firstName"
                  },
                  "last_name": {
                    "type": "string",
                    "example": "lastName"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "sample_mail@mail.com"
                  },
                  "communications_opt_out": {
                    "type": "string",
                    "enum": ["email", "sms", "all", "none"],
                    "default": "none"
                  },
                  "contact_numbers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "phone",
                            "extension",
                            "mobile",
                            "fax",
                            "other"
                          ]
                        },
                        "number": {
                          "type": "string",
                          "description": "A phone number in E.164 format",
                          "example": "+61285993444"
                        }
                      },
                      "required": ["type", "number"]
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Contact successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "account_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "relationship": {
                              "type": "string",
                              "enum": ["primary", "driver", "owner", "other"],
                              "default": "primary"
                            },
                            "first_name": {
                              "type": "string",
                              "example": "firstName"
                            },
                            "last_name": {
                              "type": "string",
                              "example": "lastName"
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "example": "sample_mail@mail.com"
                            },
                            "communications_opt_out": {
                              "type": "string",
                              "enum": ["email", "sms", "all", "none"],
                              "default": "none"
                            },
                            "contact_numbers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "phone",
                                      "extension",
                                      "mobile",
                                      "fax",
                                      "other"
                                    ]
                                  },
                                  "number": {
                                    "type": "string",
                                    "description": "A phone number in E.164 format",
                                    "example": "+61285993444"
                                  }
                                },
                                "required": ["type", "number"]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/accounts/{id}/servicing": {
      "post": {
        "tags": ["Account"],
        "summary": "Set servicing data",
        "description": "# Servicing API\n\nThe use of this API is to change the servicing information of an account. This can include changing any of this data:\n\n* Account owner\n* Account advisor\n* Account segmentation fiels: segment, branch and business unit\n\nWhen the account is successfully updated a http 200 response code is returned\n\nIf either the account, the advisor or the owner are not found, a 404 http error code is returned and the detail of what has not been found is provided in the error object\n",
        "operationId": "set_servicing",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "requestBody": {
          "description": "New servicing data for the account",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "owner_username": {
                    "type": "string",
                    "format": "email",
                    "description": "Account owner"
                  },
                  "advisor_username": {
                    "type": "string",
                    "format": "email",
                    "description": "Account advisor"
                  },
                  "business_unit": {
                    "type": "string",
                    "description": "Business unit where the account belongs to (e.g. Commercial, Affinities)",
                    "example": "Affinities"
                  },
                  "branch": {
                    "type": "string",
                    "description": "Branch where the account belongs to. Usually is is associated to a physical area",
                    "example": "Parramata"
                  },
                  "segment": {
                    "type": "string",
                    "description": "Segment where the account belongs to (e.g. RealEstate, SMEs, Professional)",
                    "example": "RealEstate"
                  }
                }
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The account ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Account servicing data successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "owner_username": {
                          "type": "string",
                          "format": "email",
                          "description": "Account owner"
                        },
                        "advisor_username": {
                          "type": "string",
                          "format": "email",
                          "description": "Account advisor"
                        },
                        "business_unit": {
                          "type": "string",
                          "description": "Business unit where the account belongs to (e.g. Commercial, Affinities)",
                          "example": "Affinities"
                        },
                        "branch": {
                          "type": "string",
                          "description": "Branch where the account belongs to. Usually is is associated to a physical area",
                          "example": "Parramata"
                        },
                        "segment": {
                          "type": "string",
                          "description": "Segment where the account belongs to (e.g. RealEstate, SMEs, Professional)",
                          "example": "RealEstate"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/policies": {
      "post": {
        "tags": ["Policy"],
        "summary": "Add a new policy",
        "description": "This endpoints creates a new policy and returns the data of the policy created including the policy_id that needs to be used later for policy updates.\n\nThe external_id field should be unique\n",
        "operationId": "add_policy",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Policy data",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "external_id": {
                    "type": "string",
                    "example": "POL-9235325",
                    "description": "External policy id"
                  },
                  "policy_number": {
                    "type": "string",
                    "example": "200000096428",
                    "description": "Policy number"
                  },
                  "account_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Coverwallet Id of the related account"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "Pre-bind",
                      "Active",
                      "Reinstated",
                      "In cancellation process",
                      "Expired",
                      "Flat Cancelled",
                      "Cancelled"
                    ],
                    "example": "Expired",
                    "description": "Policy status"
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Policy effective date"
                  },
                  "expiration_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Policy expiration date"
                  },
                  "cancellation_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Policy cancellation date"
                  },
                  "premium": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Policy net premium"
                      }
                    ]
                  },
                  "taxes": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Policy total taxes"
                      }
                    ]
                  },
                  "fees": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Policy total taxes"
                      }
                    ]
                  },
                  "insurance_type": {
                    "type": "string",
                    "description": "ID of the insurance type",
                    "example": "5056"
                  },
                  "purchase_type": {
                    "type": "string",
                    "enum": [
                      "renewal_upload",
                      "renewal",
                      "new_business",
                      "cross_sell"
                    ],
                    "nullable": true,
                    "description": "Origin of the policy"
                  },
                  "renewal_flow": {
                    "type": "string",
                    "enum": ["auto", "nonauto"],
                    "description": "Renewal type",
                    "nullable": true
                  },
                  "billing_carrier_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the billing carrier"
                  },
                  "issuing_carrier_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the issuing carrier"
                  },
                  "finance_contract_number": {
                    "type": "string",
                    "example": "tCBalhle",
                    "description": "Finance Contract #"
                  },
                  "intermediary_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the intermediary"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Policy successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "external_id": {
                              "type": "string",
                              "example": "POL-9235325",
                              "description": "External policy id"
                            },
                            "policy_number": {
                              "type": "string",
                              "example": "200000096428",
                              "description": "Policy number"
                            },
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "Coverwallet Id of the related account"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "Pre-bind",
                                "Active",
                                "Reinstated",
                                "In cancellation process",
                                "Expired",
                                "Flat Cancelled",
                                "Cancelled"
                              ],
                              "example": "Expired",
                              "description": "Policy status"
                            },
                            "effective_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy effective date"
                            },
                            "expiration_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy expiration date"
                            },
                            "cancellation_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy cancellation date"
                            },
                            "premium": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy net premium"
                                }
                              ]
                            },
                            "taxes": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy total taxes"
                                }
                              ]
                            },
                            "fees": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy total taxes"
                                }
                              ]
                            },
                            "insurance_type": {
                              "type": "string",
                              "description": "ID of the insurance type",
                              "example": "5056"
                            },
                            "purchase_type": {
                              "type": "string",
                              "enum": [
                                "renewal_upload",
                                "renewal",
                                "new_business",
                                "cross_sell"
                              ],
                              "nullable": true,
                              "description": "Origin of the policy"
                            },
                            "renewal_flow": {
                              "type": "string",
                              "enum": ["auto", "nonauto"],
                              "description": "Renewal type",
                              "nullable": true
                            },
                            "billing_carrier_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the billing carrier"
                            },
                            "issuing_carrier_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the issuing carrier"
                            },
                            "finance_contract_number": {
                              "type": "string",
                              "example": "tCBalhle",
                              "description": "Finance Contract #"
                            },
                            "intermediary_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the intermediary"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "The conflict data provided",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Policy"],
        "summary": "Fetch a policy",
        "description": "Fetch a policy by external ID",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "name": "external_id",
            "in": "query",
            "type": "string",
            "description": "The external ID of the policy you are looking for",
            "required": true
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "required": ["id"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "external_id": {
                                "type": "string",
                                "example": "POL-9235325",
                                "description": "External policy id"
                              },
                              "policy_number": {
                                "type": "string",
                                "example": "200000096428",
                                "description": "Policy number"
                              },
                              "account_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Coverwallet Id of the related account"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "Pre-bind",
                                  "Active",
                                  "Reinstated",
                                  "In cancellation process",
                                  "Expired",
                                  "Flat Cancelled",
                                  "Cancelled"
                                ],
                                "example": "Expired",
                                "description": "Policy status"
                              },
                              "effective_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Policy effective date"
                              },
                              "expiration_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Policy expiration date"
                              },
                              "cancellation_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Policy cancellation date"
                              },
                              "premium": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Policy net premium"
                                  }
                                ]
                              },
                              "taxes": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Policy total taxes"
                                  }
                                ]
                              },
                              "fees": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Policy total taxes"
                                  }
                                ]
                              },
                              "insurance_type": {
                                "type": "string",
                                "description": "ID of the insurance type",
                                "example": "5056"
                              },
                              "purchase_type": {
                                "type": "string",
                                "enum": [
                                  "renewal_upload",
                                  "renewal",
                                  "new_business",
                                  "cross_sell"
                                ],
                                "nullable": true,
                                "description": "Origin of the policy"
                              },
                              "renewal_flow": {
                                "type": "string",
                                "enum": ["auto", "nonauto"],
                                "description": "Renewal type",
                                "nullable": true
                              },
                              "billing_carrier_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "ID of the billing carrier"
                              },
                              "issuing_carrier_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "ID of the issuing carrier"
                              },
                              "finance_contract_number": {
                                "type": "string",
                                "example": "tCBalhle",
                                "description": "Finance Contract #"
                              },
                              "intermediary_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "ID of the intermediary"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/policies/{id}": {
      "get": {
        "tags": ["Policy"],
        "summary": "Fetch a policy",
        "description": "Fetch an existing policy by ID.",
        "operationId": "get_policy",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the policy you are looking for"
          }
        ],
        "responses": {
          "200": {
            "description": "Policy successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "external_id": {
                              "type": "string",
                              "example": "POL-9235325",
                              "description": "External policy id"
                            },
                            "policy_number": {
                              "type": "string",
                              "example": "200000096428",
                              "description": "Policy number"
                            },
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "Coverwallet Id of the related account"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "Pre-bind",
                                "Active",
                                "Reinstated",
                                "In cancellation process",
                                "Expired",
                                "Flat Cancelled",
                                "Cancelled"
                              ],
                              "example": "Expired",
                              "description": "Policy status"
                            },
                            "effective_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy effective date"
                            },
                            "expiration_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy expiration date"
                            },
                            "cancellation_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Policy cancellation date"
                            },
                            "premium": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy net premium"
                                }
                              ]
                            },
                            "taxes": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy total taxes"
                                }
                              ]
                            },
                            "fees": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Policy total taxes"
                                }
                              ]
                            },
                            "insurance_type": {
                              "type": "string",
                              "description": "ID of the insurance type",
                              "example": "5056"
                            },
                            "purchase_type": {
                              "type": "string",
                              "enum": [
                                "renewal_upload",
                                "renewal",
                                "new_business",
                                "cross_sell"
                              ],
                              "nullable": true,
                              "description": "Origin of the policy"
                            },
                            "renewal_flow": {
                              "type": "string",
                              "enum": ["auto", "nonauto"],
                              "description": "Renewal type",
                              "nullable": true
                            },
                            "billing_carrier_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the billing carrier"
                            },
                            "issuing_carrier_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the issuing carrier"
                            },
                            "finance_contract_number": {
                              "type": "string",
                              "example": "tCBalhle",
                              "description": "Finance Contract #"
                            },
                            "intermediary_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "ID of the intermediary"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/policies/{id}/endorsements": {
      "post": {
        "deprecated": true,
        "tags": ["Policy"],
        "summary": "Create an endorsement or change in the policy. Deprecated in favor of \"POST /endorsements\"",
        "description": "Create an endorsement or change in the policy",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The uuid of the policy"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the endorsement"
                  },
                  "policy_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the policy endorsement belongs to"
                  },
                  "account_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the account"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "Not started",
                      "Pending payment",
                      "Under review",
                      "Approved",
                      "Payment Not Collected",
                      "Not needed"
                    ],
                    "nullable": true
                  },
                  "endorsement_number": {
                    "type": "string",
                    "example": "2017.02.21-345754"
                  },
                  "type_of_change": {
                    "type": "string",
                    "enum": [
                      "Policy Change",
                      "Cancellation",
                      "Audit",
                      "New policy",
                      "Reinstatement"
                    ]
                  },
                  "processed_date": {
                    "type": "string",
                    "format": "date",
                    "example": "2017-07-21T00:00:00.000Z"
                  },
                  "description": {
                    "type": "string",
                    "example": "<p>added policy document to related files in new policy endorsement</p>"
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "data",
                    "example": "2017-02-21T00:00:00.000Z"
                  },
                  "premium_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "taxes_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "fees_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "financed_amount": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "correction_of_endorsement_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "id",
                  "policy_id",
                  "account_id",
                  "status",
                  "endorsement_number",
                  "type_of_change",
                  "processed_date",
                  "description",
                  "effective_date",
                  "premium_change",
                  "taxes_change",
                  "fees_change"
                ]
              },
              "examples": {
                "add_coverage": {
                  "value": {
                    "type": "add_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "effective_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "Liability Each Occurrence",
                          "value": {
                            "amount": 9995,
                            "currency": "USD"
                          }
                        }
                      ],
                      "coverages": [
                        {
                          "name": "Subrogation Waived",
                          "value": "25000"
                        }
                      ]
                    }
                  }
                },
                "change_coverage": {
                  "description": "When there is an update in the coverages",
                  "value": {
                    "type": "change_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "effective_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "string",
                          "value": {
                            "amount": 9995,
                            "currency": "USD"
                          }
                        }
                      ],
                      "coverages": [
                        {
                          "name": "occurrence limit",
                          "value": "25000"
                        }
                      ]
                    }
                  }
                },
                "remove_coverage": {
                  "value": {
                    "type": "remove_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Removal of policy",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "termination_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "string"
                        }
                      ],
                      "coverages": [
                        {
                          "name": "occurrence limit"
                        }
                      ]
                    }
                  }
                },
                "change_premium": {
                  "value": {
                    "type": "change_premium",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "fees": {
                        "amount": 9995,
                        "currency": "USD"
                      },
                      "taxes": {
                        "amount": 9995,
                        "currency": "USD"
                      },
                      "premium": {
                        "amount": 9995,
                        "currency": "USD"
                      }
                    }
                  }
                },
                "add_location": {
                  "value": {
                    "type": "add_location",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - New location",
                    "fields": {
                      "external_id": "my-location-1234",
                      "internal_id": "02f2ae5d-e525-4177-a441-cfd2762c6796",
                      "location": {
                        "type": "mailing",
                        "address_line": "935 Madison Ave",
                        "city": "New York",
                        "state": "NY",
                        "country_code": "US",
                        "postal_code": "10065"
                      }
                    }
                  }
                },
                "remove_location": {
                  "value": {
                    "type": "remove_location",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Location no longer in use",
                    "fields": {
                      "external_id": "my-location-1234",
                      "internal_id": "02f2ae5d-e525-4177-a441-cfd2762c6796"
                    }
                  }
                },
                "cancel_policy": {
                  "value": {
                    "type": "cancel_policy",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Policy Cancelled Flat",
                    "fields": {
                      "termination_date": "2017-07-21T17:32:28.000Z"
                    }
                  }
                },
                "reinstate_policy": {
                  "value": {
                    "type": "reinstate_policy",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Policy Reinstated - Payment received",
                    "fields": {
                      "effective_date": "2017-07-21T17:32:28.000Z"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Endorsement successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the endorsement"
                        },
                        "policy_id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the policy endorsement belongs to"
                        },
                        "account_id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the account"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "Not started",
                            "Pending payment",
                            "Under review",
                            "Approved",
                            "Payment Not Collected",
                            "Not needed"
                          ],
                          "nullable": true
                        },
                        "endorsement_number": {
                          "type": "string",
                          "example": "2017.02.21-345754"
                        },
                        "type_of_change": {
                          "type": "string",
                          "enum": [
                            "Policy Change",
                            "Cancellation",
                            "Audit",
                            "New policy",
                            "Reinstatement"
                          ]
                        },
                        "processed_date": {
                          "type": "string",
                          "format": "date",
                          "example": "2017-07-21T00:00:00.000Z"
                        },
                        "description": {
                          "type": "string",
                          "example": "<p>added policy document to related files in new policy endorsement</p>"
                        },
                        "effective_date": {
                          "type": "string",
                          "format": "data",
                          "example": "2017-02-21T00:00:00.000Z"
                        },
                        "premium_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "taxes_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "fees_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "financed_amount": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "correction_of_endorsement_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "id",
                        "policy_id",
                        "account_id",
                        "status",
                        "endorsement_number",
                        "type_of_change",
                        "processed_date",
                        "description",
                        "effective_date",
                        "premium_change",
                        "taxes_change",
                        "fees_change"
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Policy"],
        "summary": "Retrieve endorsements of a policy",
        "description": "Retrieve endorsements of a policy",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The uuid of the policy"
          }
        ],
        "responses": {
          "200": {
            "description": "Endorsements successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the endorsement"
                            },
                            "policy_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the policy endorsement belongs to"
                            },
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the account"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "Not started",
                                "Pending payment",
                                "Under review",
                                "Approved",
                                "Payment Not Collected",
                                "Not needed"
                              ],
                              "nullable": true
                            },
                            "endorsement_number": {
                              "type": "string",
                              "example": "2017.02.21-345754"
                            },
                            "type_of_change": {
                              "type": "string",
                              "enum": [
                                "Policy Change",
                                "Cancellation",
                                "Audit",
                                "New policy",
                                "Reinstatement"
                              ]
                            },
                            "processed_date": {
                              "type": "string",
                              "format": "date",
                              "example": "2017-07-21T00:00:00.000Z"
                            },
                            "description": {
                              "type": "string",
                              "example": "<p>added policy document to related files in new policy endorsement</p>"
                            },
                            "effective_date": {
                              "type": "string",
                              "format": "data",
                              "example": "2017-02-21T00:00:00.000Z"
                            },
                            "premium_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "taxes_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "fees_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "financed_amount": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "correction_of_endorsement_id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": [
                            "id",
                            "policy_id",
                            "account_id",
                            "status",
                            "endorsement_number",
                            "type_of_change",
                            "processed_date",
                            "description",
                            "effective_date",
                            "premium_change",
                            "taxes_change",
                            "fees_change"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/policies/{id}/payments": {
      "get": {
        "tags": ["Policy"],
        "summary": "Fetch a list of policy payments",
        "description": "Fetch a list of policy payments",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the policy you are looking for its payments"
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "payment_date": {
                                "type": "string",
                                "format": "date",
                                "example": "2021-07-17T00:00:00.000Z"
                              },
                              "policy_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "Succeeded",
                                  "Failed",
                                  "Pending",
                                  "Disputed",
                                  "Billing Approved"
                                ],
                                "nullable": true
                              },
                              "account_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "amount": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Payment amount"
                                  }
                                ]
                              },
                              "payment_method": {
                                "type": "string",
                                "enum": [
                                  "Card",
                                  "Bank account",
                                  "Bank transfer",
                                  "Check",
                                  "Account Current",
                                  "Paypal"
                                ]
                              },
                              "payment_type": {
                                "type": "string",
                                "enum": [
                                  "Stripe",
                                  "Carrier Portal",
                                  "Premium Finance Portal",
                                  "Other",
                                  "Paypal"
                                ]
                              },
                              "payment_concept": {
                                "type": "string",
                                "example": "Paid in full"
                              },
                              "endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "related_voided_endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "external_id": {
                                "type": "string",
                                "example": "ca_1JG2gsLIytkrERiMDJalJXui"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/certificates": {
      "post": {
        "tags": ["Certificate"],
        "summary": "Add a new certificate",
        "description": "Add a new certificate",
        "operationId": "add_certificate",
        "security": [
          {
            "oauth2": ["admin:certificate"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Create a new certificate",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "default": "certificate_of_insurance",
                    "enum": ["certificate_of_insurance"]
                  },
                  "policy_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "fields": {
                    "type": "object",
                    "properties": {
                      "holder_name": {
                        "type": "string",
                        "example": "Julia Park",
                        "description": "Name of the certificate holder"
                      }
                    },
                    "required": ["holder_name"]
                  }
                },
                "required": ["fields", "policy_ids", "type"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Certificate successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "certificate_of_insurance",
                              "enum": ["certificate_of_insurance"]
                            },
                            "policy_ids": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "fields": {
                              "type": "object",
                              "properties": {
                                "holder_name": {
                                  "type": "string",
                                  "example": "Julia Park",
                                  "description": "Name of the certificate holder"
                                }
                              },
                              "required": ["holder_name"]
                            }
                          },
                          "required": ["fields", "policy_ids", "type"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "url": {
                              "type": "string",
                              "example": "https://documents.fileserver.com/download/d4fe09a4-8852-4355-93c3-1099ac800e55"
                            }
                          },
                          "required": ["url"]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/carriers": {
      "get": {
        "tags": ["Catalog"],
        "summary": "Fetch carriers list",
        "description": "Fetch carriers list",
        "security": [
          {
            "oauth2": [[]]
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "format": "email",
                                "description": "Carrier name",
                                "example": "ACE Property & Casualty Insurance Company (SCI)"
                              },
                              "id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Carrier id",
                                "example": "ff4b7dcb-07ce-407e-9ac2-a0a4af3f0d8a"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/insurance_types": {
      "get": {
        "tags": ["Catalog"],
        "summary": "Fetch insurance types list",
        "description": "Fetch insurance types list",
        "security": [
          {
            "oauth2": [[]]
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "format": "email",
                                "description": "Insurance type name",
                                "example": "General Liability"
                              },
                              "id": {
                                "type": "string",
                                "description": "Insurance type id",
                                "example": "cdc54033-84d3-4ad1-9139-18ab8d5df1c1"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/intermediaries": {
      "get": {
        "tags": ["Catalog"],
        "summary": "Fetch intermediaries list",
        "description": "Fetch intermediaries list",
        "security": [
          {
            "oauth2": [[]]
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "format": "email",
                                "description": "Intermediary name",
                                "example": "Russell Bond"
                              },
                              "id": {
                                "type": "string",
                                "description": "Intermediary id",
                                "example": "da46dd62-3eec-4398-a18b-2b978961235b"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscriptions": {
      "post": {
        "tags": ["Subscriptions"],
        "summary": "Add a new subscription",
        "description": "Add a new subscription",
        "operationId": "add_subscription",
        "security": [
          {
            "oauth2": ["admin:subscription"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Create a new subscription",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "endpoint": {
                    "type": "string",
                    "format": "uri",
                    "example": "https://myserver.com/send/callback/here",
                    "description": "The URI where the webhook will be sent when an event happens"
                  },
                  "events": {
                    "type": "array",
                    "description": "The list of events that should trigger a webhook to the endpoint provided",
                    "items": {
                      "type": "string",
                      "enum": [
                        "endorsement.approved",
                        "policy.cancelled",
                        "policy.reinstated",
                        "policy.approved",
                        "payment.succedeed",
                        "policy.created",
                        "policy.updated",
                        "policy.neverCompleted"
                      ]
                    }
                  },
                  "notify_on_error_email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com",
                    "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                  }
                },
                "required": ["endpoint", "events"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Subscription successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "endpoint": {
                              "type": "string",
                              "format": "uri",
                              "example": "https://myserver.com/send/callback/here",
                              "description": "The URI where the webhook will be sent when an event happens"
                            },
                            "events": {
                              "type": "array",
                              "description": "The list of events that should trigger a webhook to the endpoint provided",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "endorsement.approved",
                                  "policy.cancelled",
                                  "policy.reinstated",
                                  "policy.approved",
                                  "payment.succedeed",
                                  "policy.created",
                                  "policy.updated",
                                  "policy.neverCompleted"
                                ]
                              }
                            },
                            "notify_on_error_email": {
                              "type": "string",
                              "format": "email",
                              "example": "user@example.com",
                              "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                            }
                          },
                          "required": ["endpoint", "events"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "application_mode_uuid": {
                              "type": "string",
                              "example": "44121bfa-9a00-4dd1-b9df-7628d5bc9f2d",
                              "format": "uuid"
                            },
                            "signing_key": {
                              "type": "string",
                              "pattern": "^[a-zA-Z0-9]{90}$",
                              "example": "OPO8vqr8wL1aJjHmw6HfGY8C3gxhGqWekiIoduko02BilgIxvjGAZUo4BLQ3JG58joY48vsYCxOgDs5nqJaTzkbfrC"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The event is not supported",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "The conflict data provided",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "callbacks": {
          "policy.approved": {
            "{$request.body#/PolicyApprovedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "POL-9235325",
                                    "description": "External policy id"
                                  },
                                  "policy_number": {
                                    "type": "string",
                                    "example": "200000096428",
                                    "description": "Policy number"
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "Coverwallet Id of the related account"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Pre-bind",
                                      "Active",
                                      "Reinstated",
                                      "In cancellation process",
                                      "Expired",
                                      "Flat Cancelled",
                                      "Cancelled"
                                    ],
                                    "example": "Expired",
                                    "description": "Policy status"
                                  },
                                  "effective_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy effective date"
                                  },
                                  "expiration_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy expiration date"
                                  },
                                  "cancellation_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy cancellation date"
                                  },
                                  "premium": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy net premium"
                                      }
                                    ]
                                  },
                                  "taxes": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "fees": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "insurance_type": {
                                    "type": "string",
                                    "description": "ID of the insurance type",
                                    "example": "5056"
                                  },
                                  "purchase_type": {
                                    "type": "string",
                                    "enum": [
                                      "renewal_upload",
                                      "renewal",
                                      "new_business",
                                      "cross_sell"
                                    ],
                                    "nullable": true,
                                    "description": "Origin of the policy"
                                  },
                                  "renewal_flow": {
                                    "type": "string",
                                    "enum": ["auto", "nonauto"],
                                    "description": "Renewal type",
                                    "nullable": true
                                  },
                                  "billing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the billing carrier"
                                  },
                                  "issuing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the issuing carrier"
                                  },
                                  "finance_contract_number": {
                                    "type": "string",
                                    "example": "tCBalhle",
                                    "description": "Finance Contract #"
                                  },
                                  "intermediary_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the intermediary"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": [
                              "policy.approved",
                              "policy.created",
                              "policy.cancelled",
                              "policy.reinstated"
                            ],
                            "example": "policy.approved",
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "policy.created": {
            "{$request.body#/PolicyCreatedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "POL-9235325",
                                    "description": "External policy id"
                                  },
                                  "policy_number": {
                                    "type": "string",
                                    "example": "200000096428",
                                    "description": "Policy number"
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "Coverwallet Id of the related account"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Pre-bind",
                                      "Active",
                                      "Reinstated",
                                      "In cancellation process",
                                      "Expired",
                                      "Flat Cancelled",
                                      "Cancelled"
                                    ],
                                    "example": "Expired",
                                    "description": "Policy status"
                                  },
                                  "effective_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy effective date"
                                  },
                                  "expiration_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy expiration date"
                                  },
                                  "cancellation_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy cancellation date"
                                  },
                                  "premium": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy net premium"
                                      }
                                    ]
                                  },
                                  "taxes": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "fees": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "insurance_type": {
                                    "type": "string",
                                    "description": "ID of the insurance type",
                                    "example": "5056"
                                  },
                                  "purchase_type": {
                                    "type": "string",
                                    "enum": [
                                      "renewal_upload",
                                      "renewal",
                                      "new_business",
                                      "cross_sell"
                                    ],
                                    "nullable": true,
                                    "description": "Origin of the policy"
                                  },
                                  "renewal_flow": {
                                    "type": "string",
                                    "enum": ["auto", "nonauto"],
                                    "description": "Renewal type",
                                    "nullable": true
                                  },
                                  "billing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the billing carrier"
                                  },
                                  "issuing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the issuing carrier"
                                  },
                                  "finance_contract_number": {
                                    "type": "string",
                                    "example": "tCBalhle",
                                    "description": "Finance Contract #"
                                  },
                                  "intermediary_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the intermediary"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": [
                              "policy.approved",
                              "policy.created",
                              "policy.cancelled",
                              "policy.reinstated",
                              "policy.neverCompleted"
                            ],
                            "example": "policy.created",
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "policy.cancelled": {
            "{$request.body#/PolicyCancelledEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "POL-9235325",
                                    "description": "External policy id"
                                  },
                                  "policy_number": {
                                    "type": "string",
                                    "example": "200000096428",
                                    "description": "Policy number"
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "Coverwallet Id of the related account"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Pre-bind",
                                      "Active",
                                      "Reinstated",
                                      "In cancellation process",
                                      "Expired",
                                      "Flat Cancelled",
                                      "Cancelled"
                                    ],
                                    "example": "Expired",
                                    "description": "Policy status"
                                  },
                                  "effective_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy effective date"
                                  },
                                  "expiration_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy expiration date"
                                  },
                                  "cancellation_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy cancellation date"
                                  },
                                  "premium": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy net premium"
                                      }
                                    ]
                                  },
                                  "taxes": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "fees": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "insurance_type": {
                                    "type": "string",
                                    "description": "ID of the insurance type",
                                    "example": "5056"
                                  },
                                  "purchase_type": {
                                    "type": "string",
                                    "enum": [
                                      "renewal_upload",
                                      "renewal",
                                      "new_business",
                                      "cross_sell"
                                    ],
                                    "nullable": true,
                                    "description": "Origin of the policy"
                                  },
                                  "renewal_flow": {
                                    "type": "string",
                                    "enum": ["auto", "nonauto"],
                                    "description": "Renewal type",
                                    "nullable": true
                                  },
                                  "billing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the billing carrier"
                                  },
                                  "issuing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the issuing carrier"
                                  },
                                  "finance_contract_number": {
                                    "type": "string",
                                    "example": "tCBalhle",
                                    "description": "Finance Contract #"
                                  },
                                  "intermediary_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the intermediary"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": [
                              "policy.approved",
                              "policy.created",
                              "policy.cancelled",
                              "policy.reinstated",
                              "policy.neverCompleted"
                            ],
                            "example": "policy.cancelled",
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "policy.neverCompleted": {
            "{$request.body#/PolicyNeverCompletedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "POL-9235325",
                                    "description": "External policy id"
                                  },
                                  "policy_number": {
                                    "type": "string",
                                    "example": "200000096428",
                                    "description": "Policy number"
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "Coverwallet Id of the related account"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Pre-bind",
                                      "Active",
                                      "Reinstated",
                                      "In cancellation process",
                                      "Expired",
                                      "Flat Cancelled",
                                      "Cancelled"
                                    ],
                                    "example": "Expired",
                                    "description": "Policy status"
                                  },
                                  "effective_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy effective date"
                                  },
                                  "expiration_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy expiration date"
                                  },
                                  "cancellation_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy cancellation date"
                                  },
                                  "premium": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy net premium"
                                      }
                                    ]
                                  },
                                  "taxes": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "fees": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "insurance_type": {
                                    "type": "string",
                                    "description": "ID of the insurance type",
                                    "example": "5056"
                                  },
                                  "purchase_type": {
                                    "type": "string",
                                    "enum": [
                                      "renewal_upload",
                                      "renewal",
                                      "new_business",
                                      "cross_sell"
                                    ],
                                    "nullable": true,
                                    "description": "Origin of the policy"
                                  },
                                  "renewal_flow": {
                                    "type": "string",
                                    "enum": ["auto", "nonauto"],
                                    "description": "Renewal type",
                                    "nullable": true
                                  },
                                  "billing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the billing carrier"
                                  },
                                  "issuing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the issuing carrier"
                                  },
                                  "finance_contract_number": {
                                    "type": "string",
                                    "example": "tCBalhle",
                                    "description": "Finance Contract #"
                                  },
                                  "intermediary_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the intermediary"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": [
                              "policy.approved",
                              "policy.created",
                              "policy.cancelled",
                              "policy.reinstated",
                              "policy.neverCompleted"
                            ],
                            "example": "policy.neverCompleted",
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "policy.reinstated": {
            "{$request.body#/PolicyReinstatedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "POL-9235325",
                                    "description": "External policy id"
                                  },
                                  "policy_number": {
                                    "type": "string",
                                    "example": "200000096428",
                                    "description": "Policy number"
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "Coverwallet Id of the related account"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Pre-bind",
                                      "Active",
                                      "Reinstated",
                                      "In cancellation process",
                                      "Expired",
                                      "Flat Cancelled",
                                      "Cancelled"
                                    ],
                                    "example": "Expired",
                                    "description": "Policy status"
                                  },
                                  "effective_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy effective date"
                                  },
                                  "expiration_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy expiration date"
                                  },
                                  "cancellation_date": {
                                    "type": "string",
                                    "format": "date",
                                    "description": "Policy cancellation date"
                                  },
                                  "premium": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy net premium"
                                      }
                                    ]
                                  },
                                  "taxes": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "fees": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Policy total taxes"
                                      }
                                    ]
                                  },
                                  "insurance_type": {
                                    "type": "string",
                                    "description": "ID of the insurance type",
                                    "example": "5056"
                                  },
                                  "purchase_type": {
                                    "type": "string",
                                    "enum": [
                                      "renewal_upload",
                                      "renewal",
                                      "new_business",
                                      "cross_sell"
                                    ],
                                    "nullable": true,
                                    "description": "Origin of the policy"
                                  },
                                  "renewal_flow": {
                                    "type": "string",
                                    "enum": ["auto", "nonauto"],
                                    "description": "Renewal type",
                                    "nullable": true
                                  },
                                  "billing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the billing carrier"
                                  },
                                  "issuing_carrier_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the issuing carrier"
                                  },
                                  "finance_contract_number": {
                                    "type": "string",
                                    "example": "tCBalhle",
                                    "description": "Finance Contract #"
                                  },
                                  "intermediary_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the intermediary"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": [
                              "policy.approved",
                              "policy.created",
                              "policy.cancelled",
                              "policy.reinstated",
                              "policy.neverCompleted"
                            ],
                            "example": "policy.reinstated",
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "endorsement.approved": {
            "{$request.body#/EndorsementApprovedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "policy_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "account_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "Not started",
                                  "Pending payment",
                                  "Payment done - On-going",
                                  "Payment done - Reviewing endorsement",
                                  "Approved",
                                  "Not payment - Cancelling",
                                  "Cancelled"
                                ],
                                "default": "Approved"
                              },
                              "type_of_change": {
                                "type": "string",
                                "enum": [
                                  "Policy Change",
                                  "New policy",
                                  "Cancellation",
                                  "Reinstatement",
                                  "Audit"
                                ],
                                "default": "Policy Change"
                              },
                              "processed_date": {
                                "type": "string",
                                "format": "date"
                              },
                              "description": {
                                "type": "string",
                                "example": "Description"
                              },
                              "effective_date": {
                                "type": "string",
                                "format": "date"
                              },
                              "correction_of_endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "premium_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Premium change of endorsement"
                                  }
                                ]
                              },
                              "taxes_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Taxes change of endorsement"
                                  }
                                ]
                              },
                              "fees_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Fees change of endorsement"
                                  }
                                ]
                              },
                              "payments": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "payment_id": {
                                      "type": "string",
                                      "format": "uuid"
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": ["endorsement.approved"],
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "payment.succedeed": {
            "{$request.body#/PaymentSuccedeedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "allOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": ["id"]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "payment_date": {
                                    "type": "string",
                                    "format": "date",
                                    "example": "2021-07-17T00:00:00.000Z"
                                  },
                                  "policy_id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "Succeeded",
                                      "Failed",
                                      "Pending",
                                      "Disputed",
                                      "Billing Approved"
                                    ],
                                    "nullable": true
                                  },
                                  "account_id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "amount": {
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "value": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995
                                          },
                                          "amount": {
                                            "type": "number",
                                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                            "format": "int32",
                                            "example": 9995,
                                            "deprecated": true
                                          },
                                          "currency": {
                                            "type": "string",
                                            "description": "3 letter currency code as defined by ISO-4217",
                                            "format": "iso-4217",
                                            "example": "USD"
                                          }
                                        },
                                        "required": ["amount", "currency"]
                                      },
                                      {
                                        "description": "Payment amount"
                                      }
                                    ]
                                  },
                                  "payment_method": {
                                    "type": "string",
                                    "enum": [
                                      "Card",
                                      "Bank account",
                                      "Bank transfer",
                                      "Check",
                                      "Account Current",
                                      "Paypal"
                                    ]
                                  },
                                  "payment_type": {
                                    "type": "string",
                                    "enum": [
                                      "Stripe",
                                      "Carrier Portal",
                                      "Premium Finance Portal",
                                      "Other",
                                      "Paypal"
                                    ]
                                  },
                                  "payment_concept": {
                                    "type": "string",
                                    "example": "Paid in full"
                                  },
                                  "endorsement_id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "related_voided_endorsement_id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "external_id": {
                                    "type": "string",
                                    "example": "ca_1JG2gsLIytkrERiMDJalJXui"
                                  }
                                }
                              }
                            ]
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": ["payment.succeeded"],
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          },
          "endorsement.corrected": {
            "{$request.body#/EndorsementCorrectedEndpoint}": {
              "post": {
                "parameters": [
                  {
                    "in": "header",
                    "description": "A signature of the request body that must be validated to guarantee:\n  - The request comes from our servers\n  - The request has not been modified after it left our servers\n\n<details>\n  The value of the header will have the following format: t=timestamp,v1=signature, where t is the timestamp of the instant where the signature was created, and signature is calculated as follows:\n\n  ```\n  SHA3-512(t + \".\" + body + \".\" + signing_key)\n  ```\n  where t is the UTC timestamp of the server at the time of signature generation.\n\n  For example, assuming:\n\n  ```\n  t = 1614615808\n  body = {\"foo\":\"bar\"}\n  signing_key = 8lmFHa6wHcQ5ROigRWG5hOtTSs5yNfgtKqnG0RPLRBAmkCg2rv4KmuxWKE9ie6eEYbLVCt57R8jxhcgXcrGM7rpoqi\n  ```\n  \n  The computed signature would be:\n  ```\n  b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n  and the value of the header should be:\n  ```\n  X-Signature: t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9\n  ```\n</details>\n",
                    "name": "X-Signature",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "example": "t=1614615808,v1=b79932049ff24e184fbd9290def5e1636aff7aab587d3b16c5fdcd1e909dc42045d08b40ab987cef212a1f36738b127ce71222fea932db686a597839664e18b9"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "data": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "policy_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "account_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "Not started",
                                  "Pending payment",
                                  "Payment done - On-going",
                                  "Payment done - Reviewing endorsement",
                                  "Approved",
                                  "Not payment - Cancelling",
                                  "Cancelled"
                                ],
                                "default": "Approved"
                              },
                              "type_of_change": {
                                "type": "string",
                                "enum": [
                                  "Policy Change",
                                  "New policy",
                                  "Cancellation",
                                  "Reinstatement",
                                  "Audit"
                                ],
                                "default": "Policy Change"
                              },
                              "processed_date": {
                                "type": "string",
                                "format": "date"
                              },
                              "description": {
                                "type": "string",
                                "example": "Description"
                              },
                              "effective_date": {
                                "type": "string",
                                "format": "date"
                              },
                              "correction_of_endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "premium_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Premium change of endorsement"
                                  }
                                ]
                              },
                              "taxes_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Taxes change of endorsement"
                                  }
                                ]
                              },
                              "fees_change": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Fees change of endorsement"
                                  }
                                ]
                              },
                              "payments": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "payment_id": {
                                      "type": "string",
                                      "format": "uuid"
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "created": {
                            "type": "integer",
                            "example": 1614615808,
                            "description": "Timestamp of the moment when the event happened"
                          },
                          "subscription_id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "The ID of the subscription that triggered the callback"
                          },
                          "event_name": {
                            "type": "string",
                            "enum": ["endorsement.approved"],
                            "description": "The name of the event that triggered the callback"
                          }
                        },
                        "required": [
                          "data",
                          "created",
                          "subscription_id",
                          "event_name"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Your server returns this code if it accepts the callback"
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Subscriptions"],
        "summary": "List all subscriptions",
        "description": "List all subscriptions",
        "operationId": "list_subscriptions",
        "security": [
          {
            "oauth2": ["admin:subscription"]
          }
        ],
        "responses": {
          "200": {
            "description": "List all subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "required": ["id"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "endpoint": {
                                "type": "string",
                                "format": "uri",
                                "example": "https://myserver.com/send/callback/here",
                                "description": "The URI where the webhook will be sent when an event happens"
                              },
                              "events": {
                                "type": "array",
                                "description": "The list of events that should trigger a webhook to the endpoint provided",
                                "items": {
                                  "type": "string",
                                  "enum": [
                                    "endorsement.approved",
                                    "policy.cancelled",
                                    "policy.reinstated",
                                    "policy.approved",
                                    "payment.succedeed",
                                    "policy.created",
                                    "policy.updated",
                                    "policy.neverCompleted"
                                  ]
                                }
                              },
                              "notify_on_error_email": {
                                "type": "string",
                                "format": "email",
                                "example": "user@example.com",
                                "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                              }
                            },
                            "required": ["endpoint", "events"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "application_mode_uuid": {
                                "type": "string",
                                "example": "44121bfa-9a00-4dd1-b9df-7628d5bc9f2d",
                                "format": "uuid"
                              },
                              "signing_key": {
                                "type": "string",
                                "pattern": "^[a-zA-Z0-9]{90}$",
                                "example": "OPO8vqr8wL1aJjHmw6HfGY8C3gxhGqWekiIoduko02BilgIxvjGAZUo4BLQ3JG58joY48vsYCxOgDs5nqJaTzkbfrC"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscriptions/{id}/rotate_key": {
      "put": {
        "tags": ["Subscriptions"],
        "summary": "Rotate signing_key for subscription",
        "description": "Rotate signing_key for subscription",
        "operationId": "rotate_signing_key",
        "security": [
          {
            "oauth2": ["admin:subscription"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the subscription"
          }
        ],
        "responses": {
          "200": {
            "description": "Rotate signing_key successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "endpoint": {
                              "type": "string",
                              "format": "uri",
                              "example": "https://myserver.com/send/callback/here",
                              "description": "The URI where the webhook will be sent when an event happens"
                            },
                            "events": {
                              "type": "array",
                              "description": "The list of events that should trigger a webhook to the endpoint provided",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "endorsement.approved",
                                  "policy.cancelled",
                                  "policy.reinstated",
                                  "policy.approved",
                                  "payment.succedeed",
                                  "policy.created",
                                  "policy.updated",
                                  "policy.neverCompleted"
                                ]
                              }
                            },
                            "notify_on_error_email": {
                              "type": "string",
                              "format": "email",
                              "example": "user@example.com",
                              "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                            }
                          },
                          "required": ["endpoint", "events"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "signing_key": {
                              "type": "string",
                              "pattern": "^[a-zA-Z0-9]{90}$",
                              "example": "OPO8vqr8wL1aJjHmw6HfGY8C3gxhGqWekiIoduko02BilgIxvjGAZUo4BLQ3JG58joY48vsYCxOgDs5nqJaTzkbfrC"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscriptions/{id}": {
      "put": {
        "tags": ["Subscriptions"],
        "summary": "Update subscription",
        "description": "Update subscription",
        "operationId": "update_subscription",
        "security": [
          {
            "oauth2": ["admin:subscription"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the subscription"
          }
        ],
        "requestBody": {
          "description": "Update a subscription",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "endpoint": {
                    "type": "string",
                    "format": "uri",
                    "example": "https://myserver.com/send/callback/here",
                    "description": "The URI where the webhook will be sent when an event happens"
                  },
                  "events": {
                    "type": "array",
                    "description": "The list of events that should trigger a webhook to the endpoint provided",
                    "items": {
                      "type": "string",
                      "enum": [
                        "endorsement.approved",
                        "policy.cancelled",
                        "policy.reinstated",
                        "policy.approved",
                        "payment.succedeed",
                        "policy.created",
                        "policy.updated",
                        "policy.neverCompleted"
                      ]
                    }
                  },
                  "notify_on_error_email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com",
                    "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                  }
                },
                "required": ["endpoint", "events"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "update subscription",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "endpoint": {
                              "type": "string",
                              "format": "uri",
                              "example": "https://myserver.com/send/callback/here",
                              "description": "The URI where the webhook will be sent when an event happens"
                            },
                            "events": {
                              "type": "array",
                              "description": "The list of events that should trigger a webhook to the endpoint provided",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "endorsement.approved",
                                  "policy.cancelled",
                                  "policy.reinstated",
                                  "policy.approved",
                                  "payment.succedeed",
                                  "policy.created",
                                  "policy.updated",
                                  "policy.neverCompleted"
                                ]
                              }
                            },
                            "notify_on_error_email": {
                              "type": "string",
                              "format": "email",
                              "example": "user@example.com",
                              "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                            }
                          },
                          "required": ["endpoint", "events"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "signing_key": {
                              "type": "string",
                              "pattern": "^[a-zA-Z0-9]{90}$",
                              "example": "OPO8vqr8wL1aJjHmw6HfGY8C3gxhGqWekiIoduko02BilgIxvjGAZUo4BLQ3JG58joY48vsYCxOgDs5nqJaTzkbfrC"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Subscriptions"],
        "summary": "Delete subscription",
        "description": "Delete subscription",
        "operationId": "delete_subscription",
        "security": [
          {
            "oauth2": ["admin:subscription"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the subscription"
          }
        ],
        "responses": {
          "200": {
            "description": "delete subscription",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "endpoint": {
                              "type": "string",
                              "format": "uri",
                              "example": "https://myserver.com/send/callback/here",
                              "description": "The URI where the webhook will be sent when an event happens"
                            },
                            "events": {
                              "type": "array",
                              "description": "The list of events that should trigger a webhook to the endpoint provided",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "endorsement.approved",
                                  "policy.cancelled",
                                  "policy.reinstated",
                                  "policy.approved",
                                  "payment.succedeed",
                                  "policy.created",
                                  "policy.updated",
                                  "policy.neverCompleted"
                                ]
                              }
                            },
                            "notify_on_error_email": {
                              "type": "string",
                              "format": "email",
                              "example": "user@example.com",
                              "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
                            }
                          },
                          "required": ["endpoint", "events"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "signing_key": {
                              "type": "string",
                              "pattern": "^[a-zA-Z0-9]{90}$",
                              "example": "OPO8vqr8wL1aJjHmw6HfGY8C3gxhGqWekiIoduko02BilgIxvjGAZUo4BLQ3JG58joY48vsYCxOgDs5nqJaTzkbfrC"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/payment_methods": {
      "post": {
        "tags": ["Payment methods"],
        "summary": "Add a new payment method",
        "description": "Add a new payment method",
        "operationId": "add_payment_method",
        "security": [
          {
            "oauth2": ["create:payment_method"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Create a new payment method",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "default": "credit_card",
                    "enum": ["credit_card"]
                  },
                  "provider": {
                    "type": "string",
                    "default": "stripe",
                    "enum": ["stripe"],
                    "description": "Provider used to create the payment method"
                  },
                  "token": {
                    "type": "string",
                    "description": "Tokenized credit card",
                    "example": "tok_1IeHQDGHj84Y3mnyFvg1LLUZ"
                  },
                  "account_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the account the payment method needs to be attached to"
                  }
                },
                "required": ["type", "provider", "token", "account_id"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Payment method successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "credit_card",
                              "enum": ["credit_card"]
                            },
                            "provider": {
                              "type": "string",
                              "default": "stripe",
                              "enum": ["stripe"],
                              "description": "Provider used to create the payment method"
                            },
                            "token": {
                              "type": "string",
                              "description": "Tokenized credit card",
                              "example": "tok_1IeHQDGHj84Y3mnyFvg1LLUZ"
                            },
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the account the payment method needs to be attached to"
                            }
                          },
                          "required": [
                            "type",
                            "provider",
                            "token",
                            "account_id"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/quotes": {
      "get": {
        "tags": ["Quote"],
        "summary": "Fetch a quote",
        "description": "Fetch a quote by external ID",
        "security": [
          {
            "oauth2": ["admin:quote"]
          }
        ],
        "parameters": [
          {
            "name": "external_id",
            "in": "query",
            "type": "string",
            "description": "The external ID of the quote you are looking for",
            "required": true
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "required": ["id"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "account_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "CoverWallet ID of the related account"
                              },
                              "insurance_type": {
                                "type": "string",
                                "description": "ID of the insurance type",
                                "example": "af6b2bc3-27a8-40ce-a69b-a3459500e4c8"
                              },
                              "policy_ids": {
                                "type": "array",
                                "description": "CoverWallet IDs of the related policies",
                                "items": {
                                  "type": "string",
                                  "format": "uuid"
                                }
                              },
                              "name": {
                                "type": "string",
                                "description": "Quote name",
                                "example": "IHG Owners Association, Inc. - Business Owners Policy (bop)"
                              },
                              "stage": {
                                "type": "string",
                                "description": "Quote stage",
                                "example": "Closed Won"
                              },
                              "premium": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote premium"
                                  }
                                ]
                              },
                              "taxes": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote total taxes"
                                  }
                                ]
                              },
                              "fees": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote total fees"
                                  }
                                ]
                              },
                              "effective_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Quote effective date"
                              },
                              "expiration_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Quote expiration date"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/quotes/{id}": {
      "get": {
        "tags": ["Quote"],
        "summary": "Fetch a quote",
        "description": "Fetch an existing quote by ID.",
        "operationId": "get_quote",
        "security": [
          {
            "oauth2": ["admin:quote"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the quote you are looking for"
          }
        ],
        "responses": {
          "200": {
            "description": "Quote successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "required": ["id"]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "account_id": {
                                "type": "string",
                                "format": "uuid",
                                "description": "CoverWallet ID of the related account"
                              },
                              "insurance_type": {
                                "type": "string",
                                "description": "ID of the insurance type",
                                "example": "af6b2bc3-27a8-40ce-a69b-a3459500e4c8"
                              },
                              "policy_ids": {
                                "type": "array",
                                "description": "CoverWallet IDs of the related policies",
                                "items": {
                                  "type": "string",
                                  "format": "uuid"
                                }
                              },
                              "name": {
                                "type": "string",
                                "description": "Quote name",
                                "example": "IHG Owners Association, Inc. - Business Owners Policy (bop)"
                              },
                              "stage": {
                                "type": "string",
                                "description": "Quote stage",
                                "example": "Closed Won"
                              },
                              "premium": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote premium"
                                  }
                                ]
                              },
                              "taxes": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote total taxes"
                                  }
                                ]
                              },
                              "fees": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Quote total fees"
                                  }
                                ]
                              },
                              "effective_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Quote effective date"
                              },
                              "expiration_date": {
                                "type": "string",
                                "format": "date",
                                "description": "Quote expiration date"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Quote"],
        "summary": "Update a quote",
        "description": "Update an existing quote. All fields are optional.",
        "operationId": "update_quote",
        "security": [
          {
            "oauth2": ["admin:quote"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The quote ID"
          }
        ],
        "requestBody": {
          "description": "Update a quote",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "account_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "CoverWallet ID of the related account"
                  },
                  "insurance_type": {
                    "type": "string",
                    "description": "ID of the insurance type",
                    "example": "af6b2bc3-27a8-40ce-a69b-a3459500e4c8"
                  },
                  "policy_ids": {
                    "type": "array",
                    "description": "CoverWallet IDs of the related policies",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "name": {
                    "type": "string",
                    "description": "Quote name",
                    "example": "IHG Owners Association, Inc. - Business Owners Policy (bop)"
                  },
                  "stage": {
                    "type": "string",
                    "description": "Quote stage",
                    "example": "Closed Won"
                  },
                  "premium": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Quote premium"
                      }
                    ]
                  },
                  "taxes": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Quote total taxes"
                      }
                    ]
                  },
                  "fees": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      },
                      {
                        "description": "Quote total fees"
                      }
                    ]
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Quote effective date"
                  },
                  "expiration_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Quote expiration date"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Quote successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "CoverWallet ID of the related account"
                            },
                            "insurance_type": {
                              "type": "string",
                              "description": "ID of the insurance type",
                              "example": "af6b2bc3-27a8-40ce-a69b-a3459500e4c8"
                            },
                            "policy_ids": {
                              "type": "array",
                              "description": "CoverWallet IDs of the related policies",
                              "items": {
                                "type": "string",
                                "format": "uuid"
                              }
                            },
                            "name": {
                              "type": "string",
                              "description": "Quote name",
                              "example": "IHG Owners Association, Inc. - Business Owners Policy (bop)"
                            },
                            "stage": {
                              "type": "string",
                              "description": "Quote stage",
                              "example": "Closed Won"
                            },
                            "premium": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Quote premium"
                                }
                              ]
                            },
                            "taxes": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Quote total taxes"
                                }
                              ]
                            },
                            "fees": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                },
                                {
                                  "description": "Quote total fees"
                                }
                              ]
                            },
                            "effective_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Quote effective date"
                            },
                            "expiration_date": {
                              "type": "string",
                              "format": "date",
                              "description": "Quote expiration date"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/endorsements": {
      "post": {
        "tags": ["Endorsements"],
        "summary": "Create an endorsement or change in the policy",
        "description": "Create an endorsement or change in the policy",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the endorsement"
                  },
                  "policy_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the policy endorsement belongs to"
                  },
                  "account_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "UUID of the account"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "Not started",
                      "Pending payment",
                      "Under review",
                      "Approved",
                      "Payment Not Collected",
                      "Not needed"
                    ],
                    "nullable": true
                  },
                  "endorsement_number": {
                    "type": "string",
                    "example": "2017.02.21-345754"
                  },
                  "type_of_change": {
                    "type": "string",
                    "enum": [
                      "Policy Change",
                      "Cancellation",
                      "Audit",
                      "New policy",
                      "Reinstatement"
                    ]
                  },
                  "processed_date": {
                    "type": "string",
                    "format": "date",
                    "example": "2017-07-21T00:00:00.000Z"
                  },
                  "description": {
                    "type": "string",
                    "example": "<p>added policy document to related files in new policy endorsement</p>"
                  },
                  "effective_date": {
                    "type": "string",
                    "format": "data",
                    "example": "2017-02-21T00:00:00.000Z"
                  },
                  "premium_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "taxes_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "fees_change": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "financed_amount": {
                    "allOf": [
                      {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995
                          },
                          "amount": {
                            "type": "number",
                            "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                            "format": "int32",
                            "example": 9995,
                            "deprecated": true
                          },
                          "currency": {
                            "type": "string",
                            "description": "3 letter currency code as defined by ISO-4217",
                            "format": "iso-4217",
                            "example": "USD"
                          }
                        },
                        "required": ["amount", "currency"]
                      }
                    ]
                  },
                  "correction_of_endorsement_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "id",
                  "policy_id",
                  "account_id",
                  "status",
                  "endorsement_number",
                  "type_of_change",
                  "processed_date",
                  "description",
                  "effective_date",
                  "premium_change",
                  "taxes_change",
                  "fees_change"
                ]
              },
              "examples": {
                "add_coverage": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "add_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "effective_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "Liability Each Occurrence",
                          "value": {
                            "amount": 9995,
                            "currency": "USD"
                          }
                        }
                      ],
                      "coverages": [
                        {
                          "name": "Subrogation Waived",
                          "value": "25000"
                        }
                      ]
                    }
                  }
                },
                "change_coverage": {
                  "description": "When there is an update in the coverages",
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "change_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "effective_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "string",
                          "value": {
                            "amount": 9995,
                            "currency": "USD"
                          }
                        }
                      ],
                      "coverages": [
                        {
                          "name": "occurrence limit",
                          "value": "25000"
                        }
                      ]
                    }
                  }
                },
                "remove_coverage": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "remove_coverage",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Removal of policy",
                    "fields": {
                      "section": "PL",
                      "external_id": "CNA79516",
                      "termination_date": "2017-07-21T17:32:28.000Z",
                      "limits": [
                        {
                          "name": "string"
                        }
                      ],
                      "coverages": [
                        {
                          "name": "occurrence limit"
                        }
                      ]
                    }
                  }
                },
                "change_premium": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "change_premium",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Enterprise Privacy Protection",
                    "fields": {
                      "fees": {
                        "amount": 9995,
                        "currency": "USD"
                      },
                      "taxes": {
                        "amount": 9995,
                        "currency": "USD"
                      },
                      "premium": {
                        "amount": 9995,
                        "currency": "USD"
                      }
                    }
                  }
                },
                "add_location": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "add_location",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - New location",
                    "fields": {
                      "external_id": "my-location-1234",
                      "internal_id": "02f2ae5d-e525-4177-a441-cfd2762c6796",
                      "location": {
                        "type": "mailing",
                        "address_line": "935 Madison Ave",
                        "city": "New York",
                        "state": "NY",
                        "country_code": "US",
                        "postal_code": "10065"
                      }
                    }
                  }
                },
                "remove_location": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "remove_location",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Change for endorsement CNA79516 - Location no longer in use",
                    "fields": {
                      "external_id": "my-location-1234",
                      "internal_id": "02f2ae5d-e525-4177-a441-cfd2762c6796"
                    }
                  }
                },
                "cancel_policy": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "cancel_policy",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Policy Cancelled Flat",
                    "fields": {
                      "termination_date": "2017-07-21T17:32:28.000Z"
                    }
                  }
                },
                "reinstate_policy": {
                  "value": {
                    "policy_id": "7c2519b1-ca6e-46a1-9749-2c0c3987d77c",
                    "type": "reinstate_policy",
                    "processed_datetime": "2017-07-21T17:32:28.000Z",
                    "description": "Policy Reinstated - Payment received",
                    "fields": {
                      "effective_date": "2017-07-21T17:32:28.000Z"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Endorsement successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the endorsement"
                        },
                        "policy_id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the policy endorsement belongs to"
                        },
                        "account_id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "UUID of the account"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "Not started",
                            "Pending payment",
                            "Under review",
                            "Approved",
                            "Payment Not Collected",
                            "Not needed"
                          ],
                          "nullable": true
                        },
                        "endorsement_number": {
                          "type": "string",
                          "example": "2017.02.21-345754"
                        },
                        "type_of_change": {
                          "type": "string",
                          "enum": [
                            "Policy Change",
                            "Cancellation",
                            "Audit",
                            "New policy",
                            "Reinstatement"
                          ]
                        },
                        "processed_date": {
                          "type": "string",
                          "format": "date",
                          "example": "2017-07-21T00:00:00.000Z"
                        },
                        "description": {
                          "type": "string",
                          "example": "<p>added policy document to related files in new policy endorsement</p>"
                        },
                        "effective_date": {
                          "type": "string",
                          "format": "data",
                          "example": "2017-02-21T00:00:00.000Z"
                        },
                        "premium_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "taxes_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "fees_change": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "financed_amount": {
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          ]
                        },
                        "correction_of_endorsement_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "id",
                        "policy_id",
                        "account_id",
                        "status",
                        "endorsement_number",
                        "type_of_change",
                        "processed_date",
                        "description",
                        "effective_date",
                        "premium_change",
                        "taxes_change",
                        "fees_change"
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/endorsements/{id}": {
      "get": {
        "tags": ["Endorsements"],
        "summary": "Fetch an endorsement",
        "description": "Fetch an endorsement by ID",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "type": "string",
            "description": "The ID of the endorsement you are looking for",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "Endorsement successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the endorsement"
                            },
                            "policy_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the policy endorsement belongs to"
                            },
                            "account_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the account"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "Not started",
                                "Pending payment",
                                "Under review",
                                "Approved",
                                "Payment Not Collected",
                                "Not needed"
                              ],
                              "nullable": true
                            },
                            "endorsement_number": {
                              "type": "string",
                              "example": "2017.02.21-345754"
                            },
                            "type_of_change": {
                              "type": "string",
                              "enum": [
                                "Policy Change",
                                "Cancellation",
                                "Audit",
                                "New policy",
                                "Reinstatement"
                              ]
                            },
                            "processed_date": {
                              "type": "string",
                              "format": "date",
                              "example": "2017-07-21T00:00:00.000Z"
                            },
                            "description": {
                              "type": "string",
                              "example": "<p>added policy document to related files in new policy endorsement</p>"
                            },
                            "effective_date": {
                              "type": "string",
                              "format": "data",
                              "example": "2017-02-21T00:00:00.000Z"
                            },
                            "premium_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "taxes_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "fees_change": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "financed_amount": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "value": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995
                                    },
                                    "amount": {
                                      "type": "number",
                                      "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                      "format": "int32",
                                      "example": 9995,
                                      "deprecated": true
                                    },
                                    "currency": {
                                      "type": "string",
                                      "description": "3 letter currency code as defined by ISO-4217",
                                      "format": "iso-4217",
                                      "example": "USD"
                                    }
                                  },
                                  "required": ["amount", "currency"]
                                }
                              ]
                            },
                            "correction_of_endorsement_id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": [
                            "id",
                            "policy_id",
                            "account_id",
                            "status",
                            "endorsement_number",
                            "type_of_change",
                            "processed_date",
                            "description",
                            "effective_date",
                            "premium_change",
                            "taxes_change",
                            "fees_change"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/endorsements/{id}/commissions": {
      "get": {
        "tags": ["Comissions"],
        "summary": "Fetch the commissions applied over an endorsement",
        "description": "Fetch the commissions by endorsement ID",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "type": "string",
            "description": "The ID of the endorsement you are looking for",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "Endorsement commissions successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "endorsement_id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "UUID of the endorsement"
                            },
                            "amount": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            },
                            "percentage": {
                              "type": "integer",
                              "example": 11,
                              "description": "it comes with values between 0 and 100"
                            },
                            "cw_servicing_fees": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            },
                            "agency_servicing_fees": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            },
                            "payment_processing_fees": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995
                                },
                                "amount": {
                                  "type": "number",
                                  "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                  "format": "int32",
                                  "example": 9995,
                                  "deprecated": true
                                },
                                "currency": {
                                  "type": "string",
                                  "description": "3 letter currency code as defined by ISO-4217",
                                  "format": "iso-4217",
                                  "example": "USD"
                                }
                              },
                              "required": ["amount", "currency"]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The data provided is not valid",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/endorsements/{id}/payments": {
      "get": {
        "tags": ["Endorsements"],
        "summary": "Fetch a list of endorsement payments",
        "description": "Fetch a list of endorsement payments",
        "security": [
          {
            "oauth2": ["admin:policy"]
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "format": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the endorsement you are looking for its payments"
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments successfully fetched",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "payment_date": {
                                "type": "string",
                                "format": "date",
                                "example": "2021-07-17T00:00:00.000Z"
                              },
                              "policy_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "Succeeded",
                                  "Failed",
                                  "Pending",
                                  "Disputed",
                                  "Billing Approved"
                                ],
                                "nullable": true
                              },
                              "account_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "amount": {
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995
                                      },
                                      "amount": {
                                        "type": "number",
                                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                                        "format": "int32",
                                        "example": 9995,
                                        "deprecated": true
                                      },
                                      "currency": {
                                        "type": "string",
                                        "description": "3 letter currency code as defined by ISO-4217",
                                        "format": "iso-4217",
                                        "example": "USD"
                                      }
                                    },
                                    "required": ["amount", "currency"]
                                  },
                                  {
                                    "description": "Payment amount"
                                  }
                                ]
                              },
                              "payment_method": {
                                "type": "string",
                                "enum": [
                                  "Card",
                                  "Bank account",
                                  "Bank transfer",
                                  "Check",
                                  "Account Current",
                                  "Paypal"
                                ]
                              },
                              "payment_type": {
                                "type": "string",
                                "enum": [
                                  "Stripe",
                                  "Carrier Portal",
                                  "Premium Finance Portal",
                                  "Other",
                                  "Paypal"
                                ]
                              },
                              "payment_concept": {
                                "type": "string",
                                "example": "Paid in full"
                              },
                              "endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "related_voided_endorsement_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "external_id": {
                                "type": "string",
                                "example": "ca_1JG2gsLIytkrERiMDJalJXui"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/contacts": {
      "post": {
        "tags": ["Contact"],
        "summary": "Add a contact",
        "description": "Add a contact",
        "operationId": "add_contact",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "Add a contact",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "account_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The account ID",
                        "required": true
                      }
                    }
                  },
                  {
                    "type": "object",
                    "properties": {
                      "account_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "relationship": {
                        "type": "string",
                        "enum": ["primary", "driver", "owner", "other"],
                        "default": "primary"
                      },
                      "first_name": {
                        "type": "string",
                        "example": "firstName"
                      },
                      "last_name": {
                        "type": "string",
                        "example": "lastName"
                      },
                      "email": {
                        "type": "string",
                        "format": "email",
                        "example": "sample_mail@mail.com"
                      },
                      "communications_opt_out": {
                        "type": "string",
                        "enum": ["email", "sms", "all", "none"],
                        "default": "none"
                      },
                      "contact_numbers": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "phone",
                                "extension",
                                "mobile",
                                "fax",
                                "other"
                              ]
                            },
                            "number": {
                              "type": "string",
                              "description": "A phone number in E.164 format",
                              "example": "+61285993444"
                            }
                          },
                          "required": ["type", "number"]
                        }
                      }
                    }
                  }
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Contact successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "account_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "relationship": {
                              "type": "string",
                              "enum": ["primary", "driver", "owner", "other"],
                              "default": "primary"
                            },
                            "first_name": {
                              "type": "string",
                              "example": "firstName"
                            },
                            "last_name": {
                              "type": "string",
                              "example": "lastName"
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "example": "sample_mail@mail.com"
                            },
                            "communications_opt_out": {
                              "type": "string",
                              "enum": ["email", "sms", "all", "none"],
                              "default": "none"
                            },
                            "contact_numbers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "phone",
                                      "extension",
                                      "mobile",
                                      "fax",
                                      "other"
                                    ]
                                  },
                                  "number": {
                                    "type": "string",
                                    "description": "A phone number in E.164 format",
                                    "example": "+61285993444"
                                  }
                                },
                                "required": ["type", "number"]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/contacts/{id}": {
      "patch": {
        "tags": ["Contact"],
        "summary": "Update a contact",
        "description": "Update a contact of an account. All fields except \"contact_id\" and \"account_id\" are optional.",
        "operationId": "update_contact",
        "security": [
          {
            "oauth2": ["admin:account"]
          }
        ],
        "parameters": [
          {
            "in": "header",
            "name": "X-IdempotencyKey",
            "description": "Idempotency key to uniquely identify a request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Update a contact",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "account_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The account ID",
                        "required": true
                      }
                    }
                  },
                  {
                    "type": "object",
                    "properties": {
                      "account_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "relationship": {
                        "type": "string",
                        "enum": ["primary", "driver", "owner", "other"],
                        "default": "primary"
                      },
                      "first_name": {
                        "type": "string",
                        "example": "firstName"
                      },
                      "last_name": {
                        "type": "string",
                        "example": "lastName"
                      },
                      "email": {
                        "type": "string",
                        "format": "email",
                        "example": "sample_mail@mail.com"
                      },
                      "communications_opt_out": {
                        "type": "string",
                        "enum": ["email", "sms", "all", "none"],
                        "default": "none"
                      },
                      "contact_numbers": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "phone",
                                "extension",
                                "mobile",
                                "fax",
                                "other"
                              ]
                            },
                            "number": {
                              "type": "string",
                              "description": "A phone number in E.164 format",
                              "example": "+61285993444"
                            }
                          },
                          "required": ["type", "number"]
                        }
                      }
                    }
                  }
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Contact successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": ["id"]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "account_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "relationship": {
                              "type": "string",
                              "enum": ["primary", "driver", "owner", "other"],
                              "default": "primary"
                            },
                            "first_name": {
                              "type": "string",
                              "example": "firstName"
                            },
                            "last_name": {
                              "type": "string",
                              "example": "lastName"
                            },
                            "email": {
                              "type": "string",
                              "format": "email",
                              "example": "sample_mail@mail.com"
                            },
                            "communications_opt_out": {
                              "type": "string",
                              "enum": ["email", "sms", "all", "none"],
                              "default": "none"
                            },
                            "contact_numbers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "phone",
                                      "extension",
                                      "mobile",
                                      "fax",
                                      "other"
                                    ]
                                  },
                                  "number": {
                                    "type": "string",
                                    "description": "A phone number in E.164 format",
                                    "example": "+61285993444"
                                  }
                                },
                                "required": ["type", "number"]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The corresponding object has not been found",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": {
                            "type": "string",
                            "description": "Field, method, or service that originates the error"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type of error. Should include a value defined in the catalog of errors"
                          },
                          "message": {
                            "type": "string",
                            "description": "Message that gives additional information about the error"
                          }
                        },
                        "required": ["type", "message"]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "oauth2": {
        "type": "oauth2",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://public-api.aoncover.biz/v1/oauth/token",
            "scopes": {
              "admin:account": "Grants full access to read, create and update accounts",
              "admin:policy": "Grants full access to read, create and update policies",
              "admin:subscription": "Grants access to manage subscriptions to events",
              "create:payment_method": "Grants access to create payment methods of an accounts"
            }
          },
          "password": {
            "tokenUrl": "https://public-api.aoncover.biz/v1/oauth/token",
            "scopes": {
              "admin:account": "Grants full access to read, create and update accounts",
              "admin:policy": "Grants full access to read, create and update policies",
              "admin:subscription": "Grants access to manage subscriptions to events",
              "create:payment_method": "Grants access to create payment methods of an accounts"
            }
          }
        }
      }
    },
    "schemas": {
      "Subscription": {
        "type": "object",
        "properties": {
          "endpoint": {
            "type": "string",
            "format": "uri",
            "example": "https://myserver.com/send/callback/here",
            "description": "The URI where the webhook will be sent when an event happens"
          },
          "events": {
            "type": "array",
            "description": "The list of events that should trigger a webhook to the endpoint provided",
            "items": {
              "type": "string",
              "enum": [
                "endorsement.approved",
                "policy.cancelled",
                "policy.reinstated",
                "policy.approved",
                "payment.succedeed",
                "policy.created",
                "policy.updated",
                "policy.neverCompleted"
              ]
            }
          },
          "notify_on_error_email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com",
            "description": "When the subscribed endpoint does not return a valid response. An email will be sent notifying the lost event."
          }
        },
        "required": ["endpoint", "events"]
      },
      "Account": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "external_id": {
                "type": "string",
                "example": 6843656842020,
                "description": "Account ID"
              },
              "business_information": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "My Business Name"
                  },
                  "type": {
                    "type": "string",
                    "example": "Individual",
                    "description": "Type of company: \n  * May be one of the following: Individual, Corporation, LLC, LP, etc\n"
                  },
                  "website": {
                    "type": "string",
                    "example": "www.mybusiness.com"
                  },
                  "identification_number": {
                    "type": "string",
                    "example": "1213453-X"
                  },
                  "year_established": {
                    "type": "number",
                    "format": "int32",
                    "example": 2020
                  },
                  "annual_revenue": {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  "fulltime_employees": {
                    "type": "integer",
                    "format": "int32",
                    "example": 5
                  },
                  "parttime_employees": {
                    "type": "integer",
                    "format": "int32",
                    "example": 10
                  }
                },
                "required": ["name"]
              },
              "industry": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["sic", "naics", "naf", "anzsic"],
                    "description": "Industry classification system"
                  },
                  "class_code": {
                    "type": "string",
                    "example": "cc1",
                    "description": "Class Code of the industry"
                  },
                  "subclass_code": {
                    "type": "string",
                    "example": "scc1",
                    "description": "Subclass Code of the industry"
                  }
                }
              },
              "addresses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "default": "billing",
                      "enum": ["mailing", "billing"]
                    },
                    "address_line": {
                      "type": "string",
                      "description": "Street number and street name",
                      "example": "935 Madison Ave"
                    },
                    "city": {
                      "type": "string",
                      "example": "New York"
                    },
                    "state": {
                      "type": "string",
                      "example": "NY"
                    },
                    "country_code": {
                      "type": "string",
                      "description": "Country code component of an address\n  * Must be a valid ISO 3166-1 Alpha-2 country code\n",
                      "example": "US"
                    },
                    "postal_code": {
                      "type": "string",
                      "description": "Postcode or ZIP code of an address",
                      "example": "10065"
                    }
                  },
                  "required": ["address_line"]
                }
              },
              "email": {
                "type": "string",
                "example": "sample_mail@mail.com",
                "format": "email"
              },
              "phone_number": {
                "type": "string",
                "example": "+61285993444",
                "description": "Account main phone number:\n  * May have up to 17 characters including special ones\n  * May have blocks separated by dashes or blank spaces\n  * May include a block surrounded by parentheses\n  * May include country code\n  * There cannot be two consecutive spaces or dashes\n  * There cannot be more than one block surrounded by parentheses\n"
              }
            }
          }
        ]
      },
      "Commission": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "endorsement_id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID of the endorsement"
              },
              "amount": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995
                  },
                  "amount": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995,
                    "deprecated": true
                  },
                  "currency": {
                    "type": "string",
                    "description": "3 letter currency code as defined by ISO-4217",
                    "format": "iso-4217",
                    "example": "USD"
                  }
                },
                "required": ["amount", "currency"]
              },
              "percentage": {
                "type": "integer",
                "example": 11,
                "description": "it comes with values between 0 and 100"
              },
              "cw_servicing_fees": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995
                  },
                  "amount": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995,
                    "deprecated": true
                  },
                  "currency": {
                    "type": "string",
                    "description": "3 letter currency code as defined by ISO-4217",
                    "format": "iso-4217",
                    "example": "USD"
                  }
                },
                "required": ["amount", "currency"]
              },
              "agency_servicing_fees": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995
                  },
                  "amount": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995,
                    "deprecated": true
                  },
                  "currency": {
                    "type": "string",
                    "description": "3 letter currency code as defined by ISO-4217",
                    "format": "iso-4217",
                    "example": "USD"
                  }
                },
                "required": ["amount", "currency"]
              },
              "payment_processing_fees": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995
                  },
                  "amount": {
                    "type": "number",
                    "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                    "format": "int32",
                    "example": 9995,
                    "deprecated": true
                  },
                  "currency": {
                    "type": "string",
                    "description": "3 letter currency code as defined by ISO-4217",
                    "format": "iso-4217",
                    "example": "USD"
                  }
                },
                "required": ["amount", "currency"]
              }
            }
          }
        ]
      },
      "Contact": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "account_id": {
                "type": "string",
                "format": "uuid"
              },
              "relationship": {
                "type": "string",
                "enum": ["primary", "driver", "owner", "other"],
                "default": "primary"
              },
              "first_name": {
                "type": "string",
                "example": "firstName"
              },
              "last_name": {
                "type": "string",
                "example": "lastName"
              },
              "email": {
                "type": "string",
                "format": "email",
                "example": "sample_mail@mail.com"
              },
              "communications_opt_out": {
                "type": "string",
                "enum": ["email", "sms", "all", "none"],
                "default": "none"
              },
              "contact_numbers": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["phone", "extension", "mobile", "fax", "other"]
                    },
                    "number": {
                      "type": "string",
                      "description": "A phone number in E.164 format",
                      "example": "+61285993444"
                    }
                  },
                  "required": ["type", "number"]
                }
              }
            }
          }
        ]
      },
      "Endorsement": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID of the endorsement"
              },
              "policy_id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID of the policy endorsement belongs to"
              },
              "account_id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID of the account"
              },
              "status": {
                "type": "string",
                "enum": [
                  "Not started",
                  "Pending payment",
                  "Under review",
                  "Approved",
                  "Payment Not Collected",
                  "Not needed"
                ],
                "nullable": true
              },
              "endorsement_number": {
                "type": "string",
                "example": "2017.02.21-345754"
              },
              "type_of_change": {
                "type": "string",
                "enum": [
                  "Policy Change",
                  "Cancellation",
                  "Audit",
                  "New policy",
                  "Reinstatement"
                ]
              },
              "processed_date": {
                "type": "string",
                "format": "date",
                "example": "2017-07-21T00:00:00.000Z"
              },
              "description": {
                "type": "string",
                "example": "<p>added policy document to related files in new policy endorsement</p>"
              },
              "effective_date": {
                "type": "string",
                "format": "data",
                "example": "2017-02-21T00:00:00.000Z"
              },
              "premium_change": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  }
                ]
              },
              "taxes_change": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  }
                ]
              },
              "fees_change": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  }
                ]
              },
              "financed_amount": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  }
                ]
              },
              "correction_of_endorsement_id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": [
              "id",
              "policy_id",
              "account_id",
              "status",
              "endorsement_number",
              "type_of_change",
              "processed_date",
              "description",
              "effective_date",
              "premium_change",
              "taxes_change",
              "fees_change"
            ]
          }
        ]
      },
      "InsuranceType": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "format": "email",
                "description": "Insurance type name",
                "example": "General Liability"
              },
              "id": {
                "type": "string",
                "description": "Insurance type id",
                "example": "cdc54033-84d3-4ad1-9139-18ab8d5df1c1"
              }
            }
          }
        ]
      },
      "Payment": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "payment_date": {
                "type": "string",
                "format": "date",
                "example": "2021-07-17T00:00:00.000Z"
              },
              "policy_id": {
                "type": "string",
                "format": "uuid"
              },
              "status": {
                "type": "string",
                "enum": [
                  "Succeeded",
                  "Failed",
                  "Pending",
                  "Disputed",
                  "Billing Approved"
                ],
                "nullable": true
              },
              "account_id": {
                "type": "string",
                "format": "uuid"
              },
              "amount": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Payment amount"
                  }
                ]
              },
              "payment_method": {
                "type": "string",
                "enum": [
                  "Card",
                  "Bank account",
                  "Bank transfer",
                  "Check",
                  "Account Current",
                  "Paypal"
                ]
              },
              "payment_type": {
                "type": "string",
                "enum": [
                  "Stripe",
                  "Carrier Portal",
                  "Premium Finance Portal",
                  "Other",
                  "Paypal"
                ]
              },
              "payment_concept": {
                "type": "string",
                "example": "Paid in full"
              },
              "endorsement_id": {
                "type": "string",
                "format": "uuid"
              },
              "related_voided_endorsement_id": {
                "type": "string",
                "format": "uuid"
              },
              "external_id": {
                "type": "string",
                "example": "ca_1JG2gsLIytkrERiMDJalJXui"
              }
            }
          }
        ]
      },
      "PaymentMethod": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "default": "credit_card",
                "enum": ["credit_card"]
              },
              "provider": {
                "type": "string",
                "default": "stripe",
                "enum": ["stripe"],
                "description": "Provider used to create the payment method"
              },
              "token": {
                "type": "string",
                "description": "Tokenized credit card",
                "example": "tok_1IeHQDGHj84Y3mnyFvg1LLUZ"
              },
              "account_id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID of the account the payment method needs to be attached to"
              }
            },
            "required": ["type", "provider", "token", "account_id"]
          }
        ]
      },
      "Policy": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "external_id": {
                "type": "string",
                "example": "POL-9235325",
                "description": "External policy id"
              },
              "policy_number": {
                "type": "string",
                "example": "200000096428",
                "description": "Policy number"
              },
              "account_id": {
                "type": "string",
                "format": "uuid",
                "description": "Coverwallet Id of the related account"
              },
              "status": {
                "type": "string",
                "enum": [
                  "Pre-bind",
                  "Active",
                  "Reinstated",
                  "In cancellation process",
                  "Expired",
                  "Flat Cancelled",
                  "Cancelled"
                ],
                "example": "Expired",
                "description": "Policy status"
              },
              "effective_date": {
                "type": "string",
                "format": "date",
                "description": "Policy effective date"
              },
              "expiration_date": {
                "type": "string",
                "format": "date",
                "description": "Policy expiration date"
              },
              "cancellation_date": {
                "type": "string",
                "format": "date",
                "description": "Policy cancellation date"
              },
              "premium": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Policy net premium"
                  }
                ]
              },
              "taxes": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Policy total taxes"
                  }
                ]
              },
              "fees": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Policy total taxes"
                  }
                ]
              },
              "insurance_type": {
                "type": "string",
                "description": "ID of the insurance type",
                "example": "5056"
              },
              "purchase_type": {
                "type": "string",
                "enum": [
                  "renewal_upload",
                  "renewal",
                  "new_business",
                  "cross_sell"
                ],
                "nullable": true,
                "description": "Origin of the policy"
              },
              "renewal_flow": {
                "type": "string",
                "enum": ["auto", "nonauto"],
                "description": "Renewal type",
                "nullable": true
              },
              "billing_carrier_id": {
                "type": "string",
                "format": "uuid",
                "description": "ID of the billing carrier"
              },
              "issuing_carrier_id": {
                "type": "string",
                "format": "uuid",
                "description": "ID of the issuing carrier"
              },
              "finance_contract_number": {
                "type": "string",
                "example": "tCBalhle",
                "description": "Finance Contract #"
              },
              "intermediary_id": {
                "type": "string",
                "format": "uuid",
                "description": "ID of the intermediary"
              }
            }
          }
        ]
      },
      "Quote": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "account_id": {
                "type": "string",
                "format": "uuid",
                "description": "CoverWallet ID of the related account"
              },
              "insurance_type": {
                "type": "string",
                "description": "ID of the insurance type",
                "example": "af6b2bc3-27a8-40ce-a69b-a3459500e4c8"
              },
              "policy_ids": {
                "type": "array",
                "description": "CoverWallet IDs of the related policies",
                "items": {
                  "type": "string",
                  "format": "uuid"
                }
              },
              "name": {
                "type": "string",
                "description": "Quote name",
                "example": "IHG Owners Association, Inc. - Business Owners Policy (bop)"
              },
              "stage": {
                "type": "string",
                "description": "Quote stage",
                "example": "Closed Won"
              },
              "premium": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Quote premium"
                  }
                ]
              },
              "taxes": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Quote total taxes"
                  }
                ]
              },
              "fees": {
                "allOf": [
                  {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995
                      },
                      "amount": {
                        "type": "number",
                        "description": "Amount expressed in cents. For example 100.00 has to be input as 10000",
                        "format": "int32",
                        "example": 9995,
                        "deprecated": true
                      },
                      "currency": {
                        "type": "string",
                        "description": "3 letter currency code as defined by ISO-4217",
                        "format": "iso-4217",
                        "example": "USD"
                      }
                    },
                    "required": ["amount", "currency"]
                  },
                  {
                    "description": "Quote total fees"
                  }
                ]
              },
              "effective_date": {
                "type": "string",
                "format": "date",
                "description": "Quote effective date"
              },
              "expiration_date": {
                "type": "string",
                "format": "date",
                "description": "Quote expiration date"
              }
            }
          }
        ]
      }
    }
  }
}
